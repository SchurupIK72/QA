{
  "testId": "BATTLE-REWARDS-05",
  "testName": "Многоволновой бой с разной погодой",
  "description": "Проверка начисления наград за несколько волн с разными погодными условиями и временем суток",
  "endpoint": "POST /api/v1/battle/submit-statistics",
  "section": "2.11.3 Результаты сражения - Таблица 2.11.3",

  "request": {
    "status": 0,
    "waves": [
      {
        "wave": {
          "waveNumber": 1,
          "totalShips": 2
        },
        "userBaseHealth": {
          "health": 9800,
          "damaged": 200,
          "healed": 0
        },
        "projectilesFired": [],
        "shipHits": [],
        "enemyBaseHits": [],
        "frags": [
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0001-000000000000",
            "comment": "Исследователь (Research)"
          },
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0002-000000000000",
            "comment": "Грузовой (Cargo)"
          }
        ],
        "mineFrags": [],
        "radarUsed": [],
        "radarFounded": [],
        "weatherConditions": [0],
        "timesOfDay": [0],
        "comment": "Волна 1: День, Ясно"
      },
      {
        "wave": {
          "waveNumber": 2,
          "totalShips": 3
        },
        "userBaseHealth": {
          "health": 9500,
          "damaged": 300,
          "healed": 0
        },
        "projectilesFired": [],
        "shipHits": [],
        "enemyBaseHits": [],
        "frags": [
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0003-000000000001",
            "comment": "Охотник (Speedboat R1)"
          },
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0004-000000000001",
            "comment": "Броненосец (Warship R1)"
          },
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0002-000000000000",
            "comment": "Грузовой (Cargo)"
          }
        ],
        "mineFrags": [
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "mineId": "30000000-0000-0000-0001-000000000001",
            "comment": "Мина 1"
          },
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "mineId": "30000000-0000-0000-0001-000000000002",
            "comment": "Мина 2"
          }
        ],
        "radarUsed": [],
        "radarFounded": [],
        "weatherConditions": [1],
        "timesOfDay": [0],
        "comment": "Волна 2: День, Пасмурно"
      },
      {
        "wave": {
          "waveNumber": 3,
          "totalShips": 4
        },
        "userBaseHealth": {
          "health": 9000,
          "damaged": 500,
          "healed": 0
        },
        "projectilesFired": [],
        "shipHits": [],
        "enemyBaseHits": [
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "damage": 300,
            "comment": "Урон по вражеской базе"
          }
        ],
        "frags": [
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0004-000000000003",
            "comment": "Дредноут (Warship R3)"
          },
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0004-000000000004",
            "comment": "Линкор (Warship R4)"
          },
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0003-000000000002",
            "comment": "Эсминец (Speedboat R2)"
          },
          {
            "gunId": "10000000-0000-0000-0001-000000000001",
            "shipConfigId": "20000000-0000-0000-0003-000000000003",
            "comment": "Сторожевик (Speedboat R3)"
          }
        ],
        "mineFrags": [],
        "radarUsed": [],
        "radarFounded": [],
        "weatherConditions": [3],
        "timesOfDay": [1],
        "comment": "Волна 3: Ночь, Дождь"
      }
    ]
  },

  "expectedResults": {
    "summary": {
      "totalWaves": 3,
      "totalShipKills": 9,
      "totalMineKills": 2,
      "totalEnemyBaseDamage": 300
    },

    "wave1": {
      "silver": {
        "shipKills": {
          "research": { "count": 1, "perUnit": 50, "total": 50 },
          "cargo": { "count": 1, "perUnit": 100, "total": 100 }
        },
        "waveCompletion": 300,
        "weatherBonus": 0,
        "timeOfDayBonus": 0,
        "subtotal": 450
      },
      "commanderExp": {
        "shipKills": {
          "research": { "count": 1, "perUnit": 25, "total": 25 },
          "cargo": { "count": 1, "perUnit": 25, "total": 25 }
        },
        "waveCompletion": 150,
        "weatherBonus": 0,
        "timeOfDayBonus": 0,
        "subtotal": 200
      },
      "crewExp": {
        "shipKills": {
          "research": { "count": 1, "perUnit": 10, "total": 10 },
          "cargo": { "count": 1, "perUnit": 10, "total": 10 }
        },
        "waveCompletion": 70,
        "weatherBonus": 0,
        "timeOfDayBonus": 0,
        "subtotal": 90
      }
    },

    "wave2": {
      "silver": {
        "shipKills": {
          "speedboatR1_Ohotnik": { "count": 1, "perUnit": 200, "total": 200 },
          "warshipR1_Bronenosec": { "count": 1, "perUnit": 350, "total": 350 },
          "cargo": { "count": 1, "perUnit": 100, "total": 100 }
        },
        "mineKills": { "count": 2, "perUnit": 100, "total": 200 },
        "waveCompletion": 300,
        "weatherBonus": 50,
        "timeOfDayBonus": 0,
        "subtotal": 1200,
        "comment": "Пасмурно: +50 серебра"
      },
      "commanderExp": {
        "shipKills": {
          "speedboatR1_Ohotnik": { "count": 1, "perUnit": 45, "total": 45 },
          "warshipR1_Bronenosec": { "count": 1, "perUnit": 45, "total": 45 },
          "cargo": { "count": 1, "perUnit": 25, "total": 25 }
        },
        "mineKills": { "count": 2, "perUnit": 70, "total": 140 },
        "waveCompletion": 150,
        "weatherBonus": 10,
        "timeOfDayBonus": 0,
        "subtotal": 415,
        "comment": "Пасмурно: +10 XP командира"
      },
      "crewExp": {
        "shipKills": {
          "speedboatR1_Ohotnik": { "count": 1, "perUnit": 15, "total": 15 },
          "warshipR1_Bronenosec": { "count": 1, "perUnit": 15, "total": 15 },
          "cargo": { "count": 1, "perUnit": 10, "total": 10 }
        },
        "mineKills": { "count": 2, "perUnit": 20, "total": 40 },
        "waveCompletion": 70,
        "weatherBonus": 5,
        "timeOfDayBonus": 0,
        "subtotal": 155,
        "comment": "Пасмурно: +5 XP экипажа"
      }
    },

    "wave3": {
      "silver": {
        "shipKills": {
          "warshipR3_Dreadnought": { "count": 1, "perUnit": 220, "total": 220 },
          "warshipR4_Linkor": { "count": 1, "perUnit": 200, "total": 200 },
          "speedboatR2_Esminec": { "count": 1, "perUnit": 180, "total": 180 },
          "speedboatR3_Storozevik": { "count": 1, "perUnit": 150, "total": 150 }
        },
        "enemyBaseDamage": { "damage": 300, "total": 90, "comment": "300/100*30=90" },
        "waveCompletion": 300,
        "weatherBonus": 100,
        "timeOfDayBonus": 50,
        "subtotal": 1290,
        "comment": "Дождь: +100, Ночь: +50"
      },
      "commanderExp": {
        "shipKills": {
          "warshipR3_Dreadnought": { "count": 1, "perUnit": 33, "total": 33 },
          "warshipR4_Linkor": { "count": 1, "perUnit": 30, "total": 30 },
          "speedboatR2_Esminec": { "count": 1, "perUnit": 35, "total": 35 },
          "speedboatR3_Storozevik": { "count": 1, "perUnit": 33, "total": 33 }
        },
        "enemyBaseDamage": { "damage": 300, "total": 30, "comment": "300/100*10=30" },
        "waveCompletion": 150,
        "weatherBonus": 30,
        "timeOfDayBonus": 20,
        "subtotal": 361,
        "comment": "Дождь: +30, Ночь: +20"
      },
      "crewExp": {
        "shipKills": {
          "warshipR3_Dreadnought": { "count": 1, "perUnit": 15, "total": 15 },
          "warshipR4_Linkor": { "count": 1, "perUnit": 12, "total": 12 },
          "speedboatR2_Esminec": { "count": 1, "perUnit": 20, "total": 20 },
          "speedboatR3_Storozevik": { "count": 1, "perUnit": 15, "total": 15 }
        },
        "enemyBaseDamage": { "damage": 300, "total": 30, "comment": "300/100*10=30" },
        "waveCompletion": 70,
        "weatherBonus": 15,
        "timeOfDayBonus": 15,
        "subtotal": 192,
        "comment": "Дождь: +15, Ночь: +15"
      }
    },

    "TOTALS": {
      "silver": {
        "base": 50,
        "wave1": 450,
        "wave2": 1200,
        "wave3": 1290,
        "GRAND_TOTAL": 2990
      },
      "commanderExp": {
        "base": 50,
        "wave1": 200,
        "wave2": 415,
        "wave3": 361,
        "GRAND_TOTAL": 1026
      },
      "crewExp": {
        "base": 10,
        "wave1": 90,
        "wave2": 155,
        "wave3": 192,
        "GRAND_TOTAL": 447
      }
    }
  }
}
